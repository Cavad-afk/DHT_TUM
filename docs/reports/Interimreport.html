<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_i438869y5xj-6>li:before{content:"" counter(lst-ctn-kix_i438869y5xj-6,decimal) ". "}.lst-kix_i438869y5xj-7>li:before{content:"" counter(lst-ctn-kix_i438869y5xj-7,lower-latin) ". "}.lst-kix_i438869y5xj-4>li:before{content:"" counter(lst-ctn-kix_i438869y5xj-4,lower-latin) ". "}.lst-kix_i438869y5xj-8>li:before{content:"" counter(lst-ctn-kix_i438869y5xj-8,lower-roman) ". "}.lst-kix_i438869y5xj-0>li{counter-increment:lst-ctn-kix_i438869y5xj-0}ol.lst-kix_i438869y5xj-2.start{counter-reset:lst-ctn-kix_i438869y5xj-2 0}.lst-kix_i438869y5xj-5>li:before{content:"" counter(lst-ctn-kix_i438869y5xj-5,lower-roman) ". "}ol.lst-kix_i438869y5xj-6.start{counter-reset:lst-ctn-kix_i438869y5xj-6 0}ol.lst-kix_i438869y5xj-6{list-style-type:none}ol.lst-kix_i438869y5xj-7{list-style-type:none}ol.lst-kix_i438869y5xj-8{list-style-type:none}ol.lst-kix_i438869y5xj-0.start{counter-reset:lst-ctn-kix_i438869y5xj-0 0}ol.lst-kix_i438869y5xj-2{list-style-type:none}ol.lst-kix_i438869y5xj-3{list-style-type:none}ol.lst-kix_i438869y5xj-4{list-style-type:none}ol.lst-kix_i438869y5xj-5{list-style-type:none}ol.lst-kix_i438869y5xj-5.start{counter-reset:lst-ctn-kix_i438869y5xj-5 0}ol.lst-kix_i438869y5xj-8.start{counter-reset:lst-ctn-kix_i438869y5xj-8 0}ol.lst-kix_i438869y5xj-0{list-style-type:none}ol.lst-kix_i438869y5xj-1{list-style-type:none}.lst-kix_i438869y5xj-3>li{counter-increment:lst-ctn-kix_i438869y5xj-3}.lst-kix_i438869y5xj-6>li{counter-increment:lst-ctn-kix_i438869y5xj-6}ol.lst-kix_i438869y5xj-3.start{counter-reset:lst-ctn-kix_i438869y5xj-3 0}.lst-kix_i438869y5xj-5>li{counter-increment:lst-ctn-kix_i438869y5xj-5}.lst-kix_i438869y5xj-7>li{counter-increment:lst-ctn-kix_i438869y5xj-7}.lst-kix_i438869y5xj-2>li{counter-increment:lst-ctn-kix_i438869y5xj-2}.lst-kix_i438869y5xj-1>li{counter-increment:lst-ctn-kix_i438869y5xj-1}.lst-kix_i438869y5xj-4>li{counter-increment:lst-ctn-kix_i438869y5xj-4}ol.lst-kix_i438869y5xj-1.start{counter-reset:lst-ctn-kix_i438869y5xj-1 0}ol.lst-kix_i438869y5xj-7.start{counter-reset:lst-ctn-kix_i438869y5xj-7 0}.lst-kix_i438869y5xj-0>li:before{content:"" counter(lst-ctn-kix_i438869y5xj-0,decimal) ". "}.lst-kix_i438869y5xj-2>li:before{content:"" counter(lst-ctn-kix_i438869y5xj-2,lower-roman) ". "}.lst-kix_i438869y5xj-3>li:before{content:"" counter(lst-ctn-kix_i438869y5xj-3,decimal) ". "}.lst-kix_i438869y5xj-8>li{counter-increment:lst-ctn-kix_i438869y5xj-8}ol.lst-kix_i438869y5xj-4.start{counter-reset:lst-ctn-kix_i438869y5xj-4 0}.lst-kix_i438869y5xj-1>li:before{content:"" counter(lst-ctn-kix_i438869y5xj-1,lower-latin) ". "}ol{margin:0;padding:0}table td,table th{padding:0}.c3{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:240.8pt;border-top-color:#000000;border-bottom-style:solid}.c9{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:481.7pt;border-top-color:#000000;border-bottom-style:solid}.c4{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:240.8pt;border-top-color:#000000;border-bottom-style:solid}.c11{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:240.8pt;border-top-color:#000000;border-bottom-style:solid}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c6{margin-left:36pt;padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c2{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c5{margin-left:36pt;border-spacing:0;border-collapse:collapse;margin-right:auto}.c12{background-color:#ffffff;max-width:481.7pt;padding:28.8pt 90pt 54pt 40.3pt}.c7{height:11pt}.c8{height:0pt}.c10{margin-left:36pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c12"><p class="c2"><span>This is going to a be a Kademlia like network. </span><span class="c0">I&rsquo;m planning to use coroutines. There&rsquo;ll be a loop accepting connections and parsing incoming data. To avoid data corruption, all messages have SHA-256 checksum at the end that covers everything after size. For bootstrapping, each node will have a list of hardcoded nodes. Due to the nature of the project, there&rsquo;ll be very little replication and no resaving. Values will be stored for less than 10 seconds.</span></p><p class="c2 c7"><span class="c0"></span></p><p class="c2"><span class="c0">In addition to standard:</span></p><p class="c2 c7"><span class="c0"></span></p><p class="c2"><span class="c0">650. DHT_PUT<br>651. DHT_GET<br>652. DHT_SUCCESS<br>653. DHT_FAILURE</span></p><p class="c2 c7"><span class="c0"></span></p><p class="c2"><span class="c0">there&rsquo;ll be:</span></p><p class="c2 c7"><span class="c0"></span></p><p class="c2"><span class="c0">654. DHT_PING</span></p><p class="c2"><span class="c0">655. DHT_PONG</span></p><p class="c2"><span class="c0">656. DHT_FIND_NODE</span></p><p class="c2"><span class="c0">657. DHT_FIND_VALUE</span></p><p class="c2"><span class="c0">658. DHT_ERROR</span></p><p class="c2"><span class="c0">659. DHT_NODE</span></p><p class="c2"><span class="c0">660. DHT_VALUE</span></p><p class="c2 c7"><span class="c0"></span></p><p class="c2"><span class="c0">DHT_PING, DHT_PONG, DHT_FIND_NODE, DHT_FIND_VALUE, DHT_ERROR.</span></p><p class="c2 c7"><span class="c0"></span></p><p class="c2"><span class="c0">DHT_PING is used to check if the dedicating port is running a compatible server, and to check if the node is still alive. The response should be DHT_PONG.</span></p><p class="c2 c7"><span class="c0"></span></p><p class="c2 c7 c10"><span class="c0"></span></p><a id="t.3eeb3de3f5a62a670fb0131861be978735e291b5"></a><a id="t.0"></a><table class="c5"><tbody><tr class="c8"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">Size (16 bit)</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">DHT_PING (16 bit)</span></p></td></tr><tr class="c8"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">Random value (32 bit)</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c1 c7"><span class="c0"></span></p></td></tr><tr class="c8"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">SHA-256 of all bits after size (256 bit)</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c1 c7"><span class="c0"></span></p></td></tr></tbody></table><p class="c6"><span>1. </span><span class="c0">DHT_PING</span></p><p class="c2 c7 c10"><span class="c0"></span></p><p class="c2 c7 c10"><span class="c0"></span></p><a id="t.8d343558b9fa04e7090a4bbbe874c0a030caa7e7"></a><a id="t.1"></a><table class="c5"><tbody><tr class="c8"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">Size (16 bit)</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">DHT_PONG (16 bit)</span></p></td></tr><tr class="c8"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">Random value from DHT_PING (32 bit)</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c1 c7"><span class="c0"></span></p></td></tr><tr class="c8"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">SHA-256 of all bits after size (256 bit)</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c1 c7"><span class="c0"></span></p></td></tr></tbody></table><p class="c6"><span class="c0">2. DHT_PONG</span></p><p class="c2 c7 c10"><span class="c0"></span></p><p class="c2"><span class="c0">DHT_FIND_NODE is used to look for n nodes closest to the provided key. The response would be DHT_NODES. DHT_ERROR in case of an error.</span></p><p class="c2 c7"><span class="c0"></span></p><a id="t.0c6c3d54cc67bc491ba8e32288de426be4eab408"></a><a id="t.2"></a><table class="c5"><tbody><tr class="c8"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">Size (16 bit)</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">DHT_FIND_NODE (16 bit)</span></p></td></tr><tr class="c8"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">Key (256 bit)</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c1 c7"><span class="c0"></span></p></td></tr><tr class="c8"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">SHA-256 of all bits after size (256 bit)</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c1 c7"><span class="c0"></span></p></td></tr></tbody></table><p class="c6"><span class="c0">3. DHT_FIND_NODE</span></p><p class="c6 c7"><span class="c0"></span></p><a id="t.830e7a9114b45b7d8fa5e949c2264aad25deebaf"></a><a id="t.3"></a><table class="c5"><tbody><tr class="c8"><td class="c9" colspan="1" rowspan="1"><p class="c1"><span class="c0">Size (16 bit)</span></p></td></tr><tr class="c8"><td class="c9" colspan="1" rowspan="1"><p class="c1"><span class="c0">DHT_FIND_NODE (16 bit)</span></p></td></tr><tr class="c8"><td class="c9" colspan="1" rowspan="1"><p class="c1"><span class="c0">*start*</span></p></td></tr><tr class="c8"><td class="c9" colspan="1" rowspan="1"><p class="c1"><span class="c0">IP_TYPE - 4 or 6 (8 bit)</span></p></td></tr><tr class="c8"><td class="c9" colspan="1" rowspan="1"><p class="c1"><span class="c0">IP (32 or 128 bit)</span></p></td></tr><tr class="c8"><td class="c9" colspan="1" rowspan="1"><p class="c1"><span class="c0">PORT (16 bit)</span></p></td></tr><tr class="c8"><td class="c9" colspan="1" rowspan="1"><p class="c1"><span class="c0">NODE_ID (256 bit)</span></p></td></tr><tr class="c8"><td class="c9" colspan="1" rowspan="1"><p class="c1"><span class="c0">*goto start*</span></p></td></tr><tr class="c8"><td class="c9" colspan="1" rowspan="1"><p class="c1"><span class="c0">SHA-256 of all bits after size (256 bit)</span></p></td></tr></tbody></table><p class="c6"><span class="c0">4. DHT_NODES</span></p><p class="c2 c7 c10"><span class="c0"></span></p><p class="c2"><span class="c0">DHT_FIND_VALUE is same as DHT_FIND_NODE, but if the recipient has the requested key, it will return the corresponding value. The response would be DHT_NODES or DHT_VALUE. DHT_ERROR in case of an error.</span></p><p class="c2 c7 c10"><span class="c0"></span></p><p class="c2 c7"><span class="c0"></span></p><a id="t.38de9a131a2e3bb08428ff7452fd209ca7cad20a"></a><a id="t.4"></a><table class="c5"><tbody><tr class="c8"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">Size (16 bit)</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">DHT_FIND_VALUE (16 bit)</span></p></td></tr><tr class="c8"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">Key (256 bit)</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c1 c7"><span class="c0"></span></p></td></tr><tr class="c8"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">SHA-256 of all bits after size (256 bit)</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c1 c7"><span class="c0"></span></p></td></tr></tbody></table><p class="c6"><span class="c0">5. DHT_FIND_VALUE</span></p><p class="c2 c7 c10"><span class="c0"></span></p><p class="c2 c7 c10"><span class="c0"></span></p><a id="t.1a59e564608ef7f180b1b66d811c6456b1130155"></a><a id="t.5"></a><table class="c5"><tbody><tr class="c8"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">Size (16 bit)</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">DHT_VALUE (16 bit)</span></p></td></tr><tr class="c8"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">Value (0 - size* bit)</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c1 c7"><span class="c0"></span></p></td></tr><tr class="c8"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">SHA-256 of all bits after size (256 bit)</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c1 c7"><span class="c0"></span></p></td></tr></tbody></table><p class="c6"><span class="c0">6. DHT_VALUE</span></p><p class="c2 c7 c10"><span class="c0"></span></p><a id="t.97ae39ed5e1a62dcd12cdf7b836504380d475e61"></a><a id="t.6"></a><table class="c5"><tbody><tr class="c8"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">Size (16 bit)</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">DHT_ERROR (16 bit)</span></p></td></tr><tr class="c8"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">Error code (32 bit)</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">Error message (0 - size* bit)</span></p></td></tr><tr class="c8"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">SHA-256 of all bits after size (256 bit)</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c1 c7"><span class="c0"></span></p></td></tr></tbody></table><p class="c6"><span class="c0">7. DHT_ERROR</span></p><p class="c2 c7"><span class="c0"></span></p></body></html>